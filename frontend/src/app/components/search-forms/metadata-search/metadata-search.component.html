
<div  class="table-users">    
  <form [formGroup]="metadataSearchForm">
    <mat-form-field appearance="fill">
      <mat-label>{{dateName}}</mat-label>
      <mat-date-range-input [formGroup]="range" [rangePicker]="picker" [max]="maxDate">
        <input matStartDate formControlName="start" placeholder="Start date"  >
        <input matEndDate formControlName="end" placeholder="End date">
      </mat-date-range-input>
      <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-date-range-picker #picker></mat-date-range-picker>
    
      <mat-error *ngIf="range.controls.start.hasError('matStartDatePickMax')">Invalid start date</mat-error>
      <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')">Invalid end date</mat-error>
    </mat-form-field>

    <div *ngFor="let id of controlIds">
      <form  [formGroup]="getFormGroupById(id)">
        <mat-form-field appearance="fill" class="input-zig"  *ngIf="id !== 0">
            <mat-label>Operator</mat-label>
            <mat-select (selectionChange)="operatorSelectChange($event, id)" formControlName="operatorControl">
              <mat-option>None</mat-option>
              <mat-option *ngFor="let operator of operatori" [value]="operator">{{operator}}</mat-option>
            </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill" class="input-zig">
          <mat-label>Metpodatak</mat-label>
          <mat-select (selectionChange)="metadataSelectChange($event, id)" formControlName="metadataControl">
              <mat-option>None</mat-option>
              <mat-option *ngFor="let metadataOption of metadataOptions" [value]="metadataOption">{{metadataOption}}</mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-form-field appearance="fill" class="input-zig">
            <mat-label>Vrednost</mat-label>
            <input matInput type="text" formControlName="valueControl">
        </mat-form-field>
      

        <button type="button" class="button-add-remove" (click)="addNewInputField()" *ngIf="id === controlIds[controlIds.length - 1]">+</button>
        <button type="button" class="button-add-remove" (click)="removeInputField(id)" *ngIf="id !== 0">-</button>
      </form>
      </div>

      <button type="button" class="submit-button" (click)="search()">Pretrazi</button>
  </form>
</div>    


